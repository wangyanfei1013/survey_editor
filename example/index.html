<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>survey.js Editor Test </title>
    <script src="../libs/ace.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../libs/worker-json.js" type="text/javascript" charset="utf-8"></script>
    <script src="../libs/mode-json.js" type="text/javascript" charset="utf-8"></script>

    <link rel="stylesheet" href="../libs/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <script src="../libs/knockout-debug.js"></script>
    <script src="../libs/survey.ko.js"></script>
    <link rel="stylesheet" href="../libs/survey.css" />

    <script src="../package/surveyeditor.js"></script>
    <link rel="stylesheet" href="../package/surveyeditor.css" />
</head>

<body>
    <!-- <div id="manage" data-bind="template: 'surveys-manage'"></div> -->
    <div id="editorElement"></div>
    <script type="text/javascript">
        if (!window["%hammerhead%"]) {
            // console.log(Survey)
            Survey.Survey.cssType = "bootstrap";

            Survey.JsonObject.metaData.addProperty("survey", {
                name: "description:text"
            });
            Survey.JsonObject.metaData.addProperty("survey", {
                name: "wordTemplateContent:text"
            });
            Survey.JsonObject.metaData.addProperty("survey", {
                name: "wordTemplateLabel:boolean",

            });

            console.log(Survey.JsonObject.metaData)


            // Survey.defaultBootstrapCss.navigationButton = "btn btn-default";
            SurveyEditor.editorLocalization.currentLocale = "zh-cn";
            var editorOptions = {
                questionTypes: ["text", "checkbox", "radiogroup"],
                // showJSONEditorTab: false,
            };
            var editor = new SurveyEditor.SurveyEditor("editorElement", editorOptions);


            editor.onCanShowProperty.add(function(sender, options) {
                if (options.obj.getType() == "survey") {
                    var allowSurveyProperties = ["title", 'description', "isSinglePage", "completeText", "showPageNumbers", "showPageTitles", 'showProgressBar', 'showQuestionNumbers', 'startSurveyText', 'requiredText', 'pagePrevText',
                        'pageNextText', 'goNextPageAutomatic', 'questionErrorLocation', 'wordTemplateContent', 'wordTemplateLabel'
                    ];
                    var propName = options.property.name;
                    console.log(propName)
                    var canShow = allowSurveyProperties.indexOf(propName) > -1;
                    options.canShow = canShow;
                }

            });
            //editor.surveyId = '5af48e08-a0a5-44a5-83f4-1c90e8e98de1';
            //editor.surveyPostId = '3ce10f8b-2d8a-4ca2-a110-2994b9e697a1';
            editor.saveSurveyFunc = function(saveNo, callback) {
                alert('ok');

                callback(saveNo, true)
            };

            //editor.loadSurvey("b2b56b2c-ad9e-4951-8f0e-c246d6b6a52a");
            editor.showOptions = true;
            editor.showState = true;
            //editor.loadSurvey("a0f7f132-eee4-42e4-b8c8-f8b16840a478");
            //editor.loadSurvey("65c74d4a-3b16-412f-8200-9ac53c8f5c0b");


            //ko.applyBindings(new SurveyEditor.SurveysManager("https://dxsurvey.com", "a797f29b53f8455e8b3ef317f8904dac", editor), document.getElementById("manage"));

            window.editor = editor;
        }
    </script>
</body>

</html>